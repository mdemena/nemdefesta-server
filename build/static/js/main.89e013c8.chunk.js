(this["webpackJsonpnemdefesta-app"]=this["webpackJsonpnemdefesta-app"]||[]).push([[0],{123:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),l=a.n(c),i=a(9),s=a(8),o=(a(98),a(137)),u=a(14),m=a(143),d=a(83);var f=function(){return r.a.createElement(m.a,{fixed:"top",bg:"success",expand:"md"},r.a.createElement(m.a.Brand,{to:"/",className:"d-flex flex-row align-items-center"},r.a.createElement(d.a,{className:"text-white"}),r.a.createElement("span",{className:"ml-2 text-white"},"Nem De Festa !!")))},p=a(132),g=a(145),E=a(21);var h=function(e){var t=Object(u.h)(),a=function(e){var a=t.pathname===e?"active ":"";return a+="d-flex flex-column justify-content-center align-items-center mr-4 ml-4 text-white"},n=e.user?r.a.createElement(p.a,{src:e.user.image,alt:e.user.image,className:"avatarMenu",fluid:!0,roundedCircle:!0}):r.a.createElement(E.e,{size:"20px"});return r.a.createElement(m.a,{fixed:"bottom",bg:"success"},r.a.createElement(g.a,{className:"justify-content-around ml-auto mr-auto"},r.a.createElement(i.c,{to:"/",className:a("/")},r.a.createElement(E.c,{size:"20px"}),"Inici"),r.a.createElement(i.c,{to:"/map",className:a("/map")},r.a.createElement(E.b,{size:"20px"}),"Mapa"),r.a.createElement(i.c,{to:"/profile",className:a("/login")},n,"Perfil")))},v=a(90),b=function(e){var t=e.component,a=e.user,n=e.callback,c=Object(v.a)(e,["component","user","callback"]);return r.a.createElement(u.b,Object.assign({},c,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,{callback:n,user:a})):(n(void 0),r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}}))}}))},y=a(23),x=a(7),w=a(136),j=a(138),k=a(139),O=a(142),N=a(87),C=a(133),D=a(134),M=a(48),L=a(12),T=a.n(L);a(38);var S=function(e){var t={searchText:e.searchEvents||"",fromDate:e.fromDate||T()().format("YYYY-MM-DD"),toDate:e.toDate||T()().add(1,"month").format("YYYY-MM-DD")},a=Object(n.useState)(t),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){i(Object(x.a)(Object(x.a)({},l),{},Object(y.a)({},e.target.name,e.target.value)))};return r.a.createElement(O.a,{inline:!0,onSubmit:function(t){t.preventDefault(),e.onChange(l)},className:"w-100"},r.a.createElement(O.a.Row,{className:"align-items-center w-100"},r.a.createElement(N.a,null,r.a.createElement(C.a,null,r.a.createElement(O.a.Control,{type:"text",className:"w-auto",id:"searchText",name:"searchText",placeholder:"Cercar",value:l.searchText,onChange:o,"aria-label":"Search","aria-describedby":"search-text"}),r.a.createElement(C.a.Append,null,r.a.createElement(D.a,{variant:"success",type:"submit"},r.a.createElement(M.b,null)))))),r.a.createElement(O.a.Row,{className:"align-items-center w-100 mt-2"},r.a.createElement(N.a,null,r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"fromdate-text"},"Inici:")),r.a.createElement(O.a.Control,{type:"date",id:"fromDate",name:"fromDate",value:l.fromDate,onChange:o,"aria-label":"Inici","aria-describedby":"fromdate-text"}))),r.a.createElement(N.a,null,r.a.createElement(C.a,{className:"inputRow"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"todate-text"},"Fi:")),r.a.createElement(O.a.Control,{type:"date",id:"toDate",name:"toDate",value:l.toDate,onChange:o,"aria-label":"Fi","aria-describedby":"todate-text"})))))},H=a(28),A=a(29),Y=a.n(A),_=new function e(){var t=this;Object(H.a)(this,e),this.create=function(e,a,n,r,c,l,i,s,o){return t.service.post("/add",{name:e,description:a,fromDate:n,toDate:r,locationName:c,locationAddress:l,locationFormattedAddress:i,locationCoordinatesLng:s,locationCoordinatesLat:o}).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n,r,c,l,i,s,o,u){return t.service.put("/".concat(e),{name:a,description:n,fromDate:r,toDate:c,locationName:l,locationAddress:i,locationFormattedAddress:s,locationCoordinatesLng:o,locationCoordinatesLat:u}).then((function(e){return e.data}))},this.search=function(e,a,n){return t.service.post("/",{fromDate:e,toDate:a,searchText:n}).then((function(e){return e.data}))},this.listOfAttendee=function(e){return t.service.get("/attendee/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.attendee=function(e){return t.service.patch("/attendee/".concat(e)).then((function(e){return e.data}))},this.upload=function(e,a){var n=new FormData;return n.append("image",a),t.service.patch("/upload/".concat(e),n).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=Y.a.create({baseURL:"".concat("http://www.nemdefesta.cat/api","/events"),withCredentials:!0});this.service=a},I=a(148),z=a(11),B=a.n(z),K=a(19),F=a(135),R=a(146),U=a(147),P=a(26),V=new function e(){var t=this;Object(H.a)(this,e),this.create=function(e,a,n,r,c,l){return t.service.post("/add/".concat(e),{name:a,description:n,fromDate:r,toDate:c,location:l}).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n,r,c,l){return t.service.put("/".concat(e),{name:a,description:n,fromDate:r,toDate:c,location:l}).then((function(e){return e.data}))},this.search=function(e,a,n){return t.service.post("/",{fromDate:e,toDate:a,searchText:n}).then((function(e){return e.data}))},this.listOfEvent=function(e){return t.service.get("/event/".concat(e)).then((function(e){return e.data}))},this.listOfAttendee=function(e){return t.service.get("/attendee/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.attendee=function(e){return t.service.patch("/attendee/".concat(e)).then((function(e){return e.data}))},this.upload=function(e,a){var n=new FormData;return n.append("image",a),t.service.patch("/upload/".concat(e),n).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=Y.a.create({baseURL:"".concat("http://www.nemdefesta.cat/api","/activities"),withCredentials:!0});this.service=a},J=new function e(){var t=this;Object(H.a)(this,e),this.create=function(e,a,n,r){return t.service.post("/",{title:e,description:a,event:n,activity:r}).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n){return t.service.put("/".concat(e),{title:a,description:n}).then((function(e){return e.data}))},this.list=function(){return t.service.get("/").then((function(e){return e.data}))},this.listOfEvent=function(e){return t.service.get("/event/".concat(e)).then((function(e){return e.data}))},this.listOfActivity=function(e){return t.service.get("/activity/".concat(e)).then((function(e){return e.data}))},this.listOfUser=function(e){return t.service.get("/user/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=Y.a.create({baseURL:"".concat("http://www.nemdefesta.cat/api","/comments"),withCredentials:!0});this.service=a},q=new function e(){var t=this;Object(H.a)(this,e),this.create=function(e,a,n,r,c){var l=new FormData;return l.append("title",e),l.append("description",a),l.append("event",n),l.append("activity",r),l.append("image",c),t.service.post("/",l).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n){return t.service.put("/".concat(e),{title:a,description:n}).then((function(e){return e.data}))},this.list=function(){return t.service.get("/").then((function(e){return e.data}))},this.listOfEvent=function(e){return t.service.get("/event/".concat(e)).then((function(e){return e.data}))},this.listOfActivity=function(e){return t.service.get("/activity/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=Y.a.create({baseURL:"".concat("http://www.nemdefesta.cat/api","/images"),withCredentials:!0});this.service=a};var G=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),u=Object(s.a)(o,2),m=u[0],d=u[1],f=Object(n.useRef)(null),p=function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=20;break}t.t0=e.type,t.next="event"===t.t0?4:"activity"===t.t0?7:"comment"===t.t0?10:"image"===t.t0?13:16;break;case 4:return t.next=6,_.like(e.id);case 6:return t.abrupt("break",17);case 7:return t.next=9,V.like(e.id);case 9:return t.abrupt("break",17);case 10:return t.next=12,J.like(e.id);case 12:return t.abrupt("break",17);case 13:return t.next=15,q.like(e.id);case 15:case 16:return t.abrupt("break",17);case 17:e.onClick(),t.next=22;break;case 20:l(!c),d(a.target);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{ref:f},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:p,alt:"M'agrada"},r.a.createElement(P.c,null),r.a.createElement(F.a,{variant:"light"},e.quantity)),r.a.createElement(R.a,{show:c,target:m,container:f.current,containerPadding:20,placement:"top",rootClose:!0,onHide:function(){l(!1)}},r.a.createElement(U.a,{id:"popover-contained"},r.a.createElement(U.a.Title,{as:"h3",className:"bg-warning"},r.a.createElement(P.a,{className:"rounded mr-2"}),r.a.createElement("strong",{className:"mr-auto"},"\xa1\xa1\xa1 No est\xe0s autenticat !!!")),r.a.createElement(U.a.Content,null,"Pots ",r.a.createElement(i.b,{to:"/login"},"accedir")," o"," ",r.a.createElement(i.b,{to:"/signup"},"registrar-te")))))};var W=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),u=Object(s.a)(o,2),m=u[0],d=u[1],f=Object(n.useRef)(null),p=function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=20;break}t.t0=e.type,t.next="event"===t.t0?4:"activity"===t.t0?7:"comment"===t.t0?10:"image"===t.t0?13:16;break;case 4:return t.next=6,_.unlike(e.id);case 6:return t.abrupt("break",17);case 7:return t.next=9,V.unlike(e.id);case 9:return t.abrupt("break",17);case 10:return t.next=12,J.unlike(e.id);case 12:return t.abrupt("break",17);case 13:return t.next=15,q.unlike(e.id);case 15:case 16:return t.abrupt("break",17);case 17:e.onClick(),t.next=22;break;case 20:l(!c),d(a.target);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{ref:f},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:p},r.a.createElement(P.b,null),r.a.createElement(F.a,{variant:"light"},e.quantity)),r.a.createElement(R.a,{show:c,target:m,container:f.current,containerPadding:20,placement:"top",rootClose:!0,onHide:function(){l(!1)}},r.a.createElement(U.a,{id:"popover-contained"},r.a.createElement(U.a.Title,{as:"h3",className:"bg-warning"},r.a.createElement(P.a,{className:"rounded mr-2"}),r.a.createElement("strong",{className:"mr-auto"},"\xa1\xa1\xa1 No est\xe0s autenticat !!!")),r.a.createElement(U.a.Content,null,"Pots ",r.a.createElement(i.b,{to:"/login"},"accedir")," o"," ",r.a.createElement(i.b,{to:"/signup"},"registrar-te")))))};var $=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),u=Object(s.a)(o,2),m=u[0],d=u[1],f=Object(n.useRef)(null),p=function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=14;break}t.t0=e.type,t.next="event"===t.t0?4:"activity"===t.t0?7:10;break;case 4:return t.next=6,_.attendee(e.id);case 6:return t.abrupt("break",11);case 7:return t.next=9,V.attendee(e.id);case 9:case 10:return t.abrupt("break",11);case 11:e.onClick(),t.next=16;break;case 14:l(!c),d(a.target);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=e.user&&e.array.includes(e.user._id)?r.a.createElement(P.d,null):r.a.createElement(P.e,null);return r.a.createElement("div",{ref:f},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:p},g,r.a.createElement(F.a,{variant:"light"},e.array.length)),r.a.createElement(R.a,{show:c,target:m,container:f.current,containerPadding:20,placement:"top",rootClose:!0,onHide:function(){l(!1)}},r.a.createElement(U.a,{id:"popover-contained"},r.a.createElement(U.a.Title,{as:"h3",className:"bg-warning"},r.a.createElement(P.a,{className:"rounded mr-2"}),r.a.createElement("strong",{className:"mr-auto"},"\xa1\xa1\xa1 No est\xe0s autenticat !!!")),r.a.createElement(U.a.Content,null,"Pots ",r.a.createElement(i.b,{to:"/login"},"accedir")," o"," ",r.a.createElement(i.b,{to:"/signup"},"registrar-te")))))},Q=a(149),X=a(141),Z=a(33);var ee=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=(a[0],a[1],Object(n.useState)(null)),l=Object(s.a)(c,2),i=(l[0],l[1],Object(n.useRef)(null),function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="event"===t.t0?3:"activity"===t.t0?6:"comment"===t.t0?9:"image"===t.t0?12:15;break;case 3:return t.next=5,_.delete(e.id);case 5:return t.abrupt("break",16);case 6:return t.next=8,V.delete(e.id);case 8:return t.abrupt("break",16);case 9:return t.next=11,J.delete(e.id);case 11:return t.abrupt("break",16);case 12:return t.next=14,q.delete(e.id);case 14:case 15:return t.abrupt("break",16);case 16:e.onClick();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return r.a.createElement(P.f,{onClick:i})},te=a(144),ae=a(86),ne=new function e(){var t=this;Object(H.a)(this,e),this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n){return t.service.put("/",{username:e,name:a,email:n}).then((function(e){return e.data}))},this.upload=function(e){var a=new FormData;return a.append("image",e),t.service.patch("/upload",a).then((function(e){return e.data}))},this.checkusername=function(e,a){return t.service.post("/checkusername",{id:e,username:a}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.checkemail=function(e,a){return t.service.post("/checkemail",{id:e,email:a}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.events=function(e){return t.service.get("/events/".concat(e)).then((function(e){return e.data}))},this.activities=function(e){return t.service.get("/activities/".concat(e)).then((function(e){return e.data}))},this.comments=function(e){return t.service.get("/comments/".concat(e)).then((function(e){return e.data}))},this.images=function(e){return t.service.get("/images/".concat(e)).then((function(e){return e.data}))};var a=Y.a.create({baseURL:"".concat("http://www.nemdefesta.cat/api","/users"),withCredentials:!0});this.service=a},re=new function e(){var t=this;Object(H.a)(this,e),this.signup=function(e,a,n,r){return t.service.post("/signup",{username:e,name:a,email:n,password:r}).then((function(e){return e.data}))},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then((function(e){return e.data}))},this.checkusername=function(e){return t.service.post("/checkusername",{username:e}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.checkemail=function(e){return t.service.post("/checkemail",{email:e}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.google=function(){return"http://www.nemdefesta.cat/api/google"},this.logout=function(){return t.service.post("/logout",{}).then((function(e){return 200===e.status}))},this.loggedin=function(){return t.service.post("/loggedin").then((function(e){return 200===e.status})).catch((function(e){return 200===e.status}))};var a=Y.a.create({baseURL:"".concat("http://www.nemdefesta.cat/api","/auth"),withCredentials:!0});this.service=a},ce=function(e,t){switch(t.type){case"field":return Object(x.a)(Object(x.a)({},e),{},Object(y.a)({},t.fieldName,t.fieldValue));case"openModal":return Object(x.a)(Object(x.a)({},e),{},{isShowing:!0});case"closeModal":return Object(x.a)(Object(x.a)({},e),{},{isShowing:!1});case"loading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!0});case"notLoading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1});default:return e}};var le=function(e){var t={image:e.image,isLoading:!1,isShowing:!1},a=Object(n.useReducer)(ce,t),c=Object(s.a)(a,2),l=c[0],i=c[1],u=function(){return i({type:"closeModal"})};return l.isLoading?r.a.createElement(w.a,{animation:"border",variant:"success",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Carregant...")):r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center w-100"},r.a.createElement(p.a,{src:e.image,alt:e.image,className:"avatar",fluid:!0,roundedCircle:!0,thumbnail:!0,onClick:function(){return i({type:e.readOnly?"closeModal":"openModal"})}}),r.a.createElement(X.a,{show:l.isShowing,onHide:u,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,"Selecciona una imatge")),r.a.createElement(X.a.Body,null,r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(ae.a,{id:"imatge",name:"imatge",type:"file",onChange:function(e){var t=e.target.files[0];i({type:"field",fieldName:"image",fieldValue:t})},placeholder:"Fitxer de la imatge","aria-label":"Fitxer de la imatge","aria-describedby":"image-text"}))),r.a.createElement(X.a.Footer,null,r.a.createElement(D.a,{variant:"secondary",onClick:u},"Tanca"),r.a.createElement(D.a,{variant:"primary",onClick:function(t){u(),i({type:"loading"}),re.loggedin().then((function(t){t&&ne.upload(l.image).then((function(t){e.onUpload(t),i({type:"notLoading"})}))}))}},"Selecciona"))))},ie=a(42);var se=function(e){var t=e.center,a=e.zoom||17,n=e.points.map((function(e){return r.a.createElement(ie.d,{key:e._id,position:{lat:e.gpsLocation.coordinates[0],lng:e.gpsLocation.coordinates[1]}})}));return r.a.createElement(ie.c,{googleMapsApiKey:"AIzaSyDf8lFaNmy0tTkfhhBgiJHR4N_yO_8Sfps"},r.a.createElement(ie.a,{mapContainerStyle:{minWidth:"100%",width:"100%",minHeight:"100%",height:"300px",overflow:"auto"},center:t,zoom:a},n))};var oe=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){l(!c)};return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:i},r.a.createElement(E.b,null)),r.a.createElement(X.a,{show:c,onHide:i,centered:!0},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,e.location.name)),r.a.createElement(X.a.Body,null,r.a.createElement(se,{center:{lat:e.location.gpsLocation.coordinates[0],lng:e.location.gpsLocation.coordinates[1]},points:[e.location]}))))};a(38);var ue=function(e){var t=e.activity,a=Object(u.g)(),n=function(){e.onClick()},c=t.location&&e.showLocation?r.a.createElement(oe,{location:t.location}):r.a.createElement(r.a.Fragment,null);return r.a.createElement(I.a,{className:"bg-success text-white",border:"success"},r.a.createElement(I.a.Body,{onClick:function(){return e=t._id,void a.push("/activities/"+e);var e}},r.a.createElement(I.a.Title,null,t.name),r.a.createElement(I.a.Text,null,t.description),r.a.createElement(I.a.Text,{className:"d-flex flex-column"},r.a.createElement("span",null,r.a.createElement("small",null,"Des del ",T()(t.fromDate).format("DD-MM-YYYY")," a les"," ",T()(t.fromDate).format("HH:MM"))),r.a.createElement("span",null,r.a.createElement("small",null,"Fins el ",T()(t.toDate).format("DD-MM-YYYY")," a les"," ",T()(t.toDate).format("HH:MM"))))),r.a.createElement(I.a.Footer,null,r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},c,r.a.createElement(G,{type:"activity",id:t._id,quantity:t.likes.length,user:e.user,onClick:n}),r.a.createElement(W,{type:"activity",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:n}),r.a.createElement(Ee,{type:"activity",id:t._id,array:t.comments,user:e.user,onClick:n}),r.a.createElement($,{type:"activity",id:t._id,array:t.attendees,user:e.user,onClick:n}))))};a(38);var me=function(e){var t=e.image,a=function(){e.onClick()},n=function(){return e.user._id===t._id?r.a.createElement(ee,{type:"image",id:t._id,onClick:a}):r.a.createElement(r.a.Fragment,null)};return r.a.createElement(I.a,{className:"bg-success text-white",border:"success"},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null,t.title),r.a.createElement(I.a.Img,{src:t.image,alt:t.title}),r.a.createElement(I.a.Text,null,t.description),r.a.createElement(I.a.Text,null,r.a.createElement("small",null,"Publicada el ",T()(t.createAt).format("DD-MM-YYYY")," a les"," ",T()(t.createAt).format("HH:MM")))),r.a.createElement(I.a.Footer,null,r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},r.a.createElement(G,{type:"image",id:t._id,quantity:t.likes.length,user:e.user,onClick:a}),r.a.createElement(W,{type:"image",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:a}),n)))},de=a(49);var fe=function(e){var t=e.id||e.match.params.id,a=Object(n.useState)({}),c=Object(s.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)([]),g=Object(s.a)(p,2),h=g[0],v=g[1],b=Object(n.useState)([]),y=Object(s.a)(b,2),x=y[0],k=y[1],O=Object(n.useState)(!0),C=Object(s.a)(O,2),D=C[0],M=C[1];Object(n.useEffect)((function(){L()}),[]);var L=function(){var e=Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.t0=i,e.next=4,ne.get(t);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=v,e.next=9,ne.comments(t);case 9:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=f,e.next=14,ne.activities(t);case 14:return e.t5=e.sent,(0,e.t4)(e.t5),e.t6=k,e.next=19,ne.images(t);case 19:e.t7=e.sent,(0,e.t6)(e.t7),M(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){L()},S=d.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ue,{user:e.user,activity:t,onClick:T}))})),H=h.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,comment:t,onClick:T}))})),A=x.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(me,{user:e.user,image:t,onClick:T}))}));return D?r.a.createElement(o.a,{fluid:!0,className:"fill-window d-flex flex-column justify-content-center align-items-center"},r.a.createElement(w.a,{animation:"border",variant:"success",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Carregant..."))):r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement(le,{image:l.image,readOnly:!0}),r.a.createElement("h2",null,l.username),r.a.createElement(o.a,{className:"d-flex flex-column"},r.a.createElement(j.a,null,r.a.createElement(N.a,null,"Nom:"),r.a.createElement(N.a,{className:"text-left"},l.name)),r.a.createElement(j.a,null,r.a.createElement(N.a,null,"Email:"),r.a.createElement(N.a,null,l.email)),r.a.createElement(j.a,null,r.a.createElement("hr",null)),r.a.createElement(j.a,null,r.a.createElement(te.a,{className:"mt-2 w-100"},r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"0"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha realitzat ",h.length," comentaris",r.a.createElement(Z.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"0"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},H)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha publicat ",x.length," imatges",r.a.createElement(E.d,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"1"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},A)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Assitir\xe0 a ",d.length," activitats",r.a.createElement(de.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"2"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},S))))))))};var pe=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){l(!c)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{variant:"light",onClick:i},e.profile.username),r.a.createElement(X.a,{show:c,onHide:i},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,"Perfil de ",e.profile.username)),r.a.createElement(X.a.Body,null,r.a.createElement(fe,{id:e.profile._id}))))};a(38);var ge=function(e){var t=e.comment,a=function(){e.onClick()},n=function(){return e.user._id===t._id?r.a.createElement(ee,{type:"comment",id:t._id,onClick:a}):r.a.createElement(r.a.Fragment,null)};return r.a.createElement(I.a,{className:"bg-success text-white",border:"success"},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null,t.title),r.a.createElement(I.a.Text,null,t.description),r.a.createElement(I.a.Text,null,r.a.createElement("small",null,"Comentari de ",r.a.createElement(pe,{profile:t.user})," realitzat el"," ",T()(t.createdAt).format("DD-MM-YYYY HH:MM")))),r.a.createElement(I.a.Footer,null,r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},r.a.createElement(G,{type:"comment",id:t._id,quantity:t.likes.length,user:e.user,onClick:a}),r.a.createElement(W,{type:"comment",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:a}),n)))};var Ee=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){e.onClick()},o=function(){l(!c)},u=e.array.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,comment:t,onClick:i}))}));return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:o},r.a.createElement(Z.a,null),r.a.createElement(F.a,{variant:"light"},e.array.length)),r.a.createElement(X.a,{show:c,onHide:o},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,"Comentaris")),r.a.createElement(X.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},u))))};a(38);var he=function(e){var t=e.event,a=Object(u.g)(),n=function(){e.onClick()},c=function(e){a.push("/events/"+e)};return r.a.createElement(I.a,{className:"bg-success text-white",border:"success"},e.showImage?r.a.createElement(I.a.Img,{variant:"top",src:t.image,alt:t.name,className:"mw-100",onClick:function(){return c(t._id)}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(I.a.Body,{onClick:function(){return c(t._id)}},r.a.createElement(I.a.Title,null,t.name),r.a.createElement(I.a.Text,null,t.description),r.a.createElement(I.a.Text,null,r.a.createElement("small",null,"Des del ",T()(t.fromDate).format("DD-MM-YYYY")," fins el"," ",T()(t.toDate).format("DD-MM-YYYY")))),r.a.createElement(I.a.Footer,null,r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},r.a.createElement(G,{type:"event",id:t._id,quantity:t.likes.length,user:e.user,onClick:n}),r.a.createElement(W,{type:"event",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:n}),r.a.createElement(Ee,{type:"event",id:t._id,array:t.comments,user:e.user,onClick:n}),r.a.createElement($,{type:"event",id:t._id,array:t.attendees,user:e.user,onClick:n}))))};a(38);var ve=function(e,t){switch(t.type){case"field":return sessionStorage.setItem(t.fieldName,JSON.stringify(t.fieldValue)),Object(x.a)(Object(x.a)({},e),{},Object(y.a)({},t.fieldName,t.fieldValue));case"loading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!0});case"notLoading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1});default:return e}},be={searchText:JSON.parse(sessionStorage.getItem("searchText"))||"",fromDate:JSON.parse(sessionStorage.getItem("fromDate"))||T()().format("YYYY-MM-DD"),toDate:JSON.parse(sessionStorage.getItem("toDate"))||T()().add(1,"month").format("YYYY-MM-DD"),events:JSON.parse(sessionStorage.getItem("events"))||[],isLoading:!1,isShowing:!1,refresh:!1};var ye=function(e){var t=Object(n.useReducer)(ve,be),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){u(c.fromDate,c.toDate,c.searchText)};function u(e,t,a){l({type:"loading"}),_.search(e,t,a).then((function(e){l({type:"field",fieldName:"events",fieldValue:e}),l({type:"notLoading"})})).catch((function(){return l({type:"notLoading"})}))}Object(n.useEffect)((function(){u(c.fromDate,c.toDate,c.searchText)}),[]);var m=c.events.map((function(t){return r.a.createElement(he,{user:e.user,key:t._id,event:t,onClick:i,showImage:!0})}));return c.isLoading?r.a.createElement(o.a,{fluid:!0,className:"fill-window d-flex flex-column justify-content-center align-items-center"},r.a.createElement(w.a,{animation:"border",variant:"success",size:"50px",role:"status"})):r.a.createElement(o.a,null,r.a.createElement(j.a,null,r.a.createElement(S,{searchEvents:c.searchEvents,fromDate:c.fromDate,toDate:c.toDate,onChange:function(e){var t=e.searchText,a=e.fromDate,n=e.toDate;l({type:"field",fieldName:"searchText",fieldValue:t}),l({type:"field",fieldName:"fromDate",fieldValue:a}),l({type:"field",fieldName:"toDate",fieldValue:n}),u(a,n,t)}})),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement(k.a,null,m)))},xe=a(140),we=function(e,t){switch(t.type){case"field":return Object(x.a)(Object(x.a)({},e),{},Object(y.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(x.a)(Object(x.a)({},e),{},{showAlert:!0,alertMessages:a,isLoading:!1});case"resetAlert":case"closeAlert":return Object(x.a)(Object(x.a)({},e),{},{showAlert:!1,alertMessages:[]});case"login":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!0});case"notLoading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1});case"googleAuth":return Object(x.a)(Object(x.a)({},e),{},{googleAuth:!0});default:return e}},je={username:"",password:"",isLoading:!1,showAlert:!1,alertMessages:[]};var ke=function(e){var t=Object(n.useReducer)(we,je),a=Object(s.a)(t,2),c=a[0],l=a[1],m=Object(u.g)(),d=function(e){var t=e.target,a=t.name,n=t.value;l({type:"field",fieldName:a,fieldValue:n})},f=c.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement("h3",null,"Entra a Nem De Festa !!"),r.a.createElement("a",{href:re.google(),className:"btn btn-danger w-100"},r.a.createElement("span",null,r.a.createElement(M.a,null),"\xa0\xa0Entra amb Google")),r.a.createElement("hr",null),r.a.createElement(O.a,{onSubmit:function(t){t.preventDefault(),l({type:"resetAlert"}),c.username||l({type:"alert",alertMessage:"Has d'indicar un usuari"}),c.password||l({type:"alert",alertMessage:"Has d'indicar una clau d'acc\xe9s"}),c.password.length<8&&l({type:"alert",alertMessage:"La clau d'acc\xe9s ha de tenir un minim de 8 car\xe0cters"}),c.showAlert||(l({type:"login"}),re.login(c.username,c.password).then((function(t){e.dispatch({type:"login",user:t}),m.push("/")})).catch((function(e){return l({type:"alert",alertMessage:e.response.data.message})})))},className:"w-100"},r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"username-text"},"Usuari:")),r.a.createElement(ae.a,{id:"username",name:"username",type:"text",value:c.username,onChange:d,placeholder:"Usuari","aria-label":"Usuari","aria-describedby":"username-text"})),r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"password-text"},"Clau:")),r.a.createElement(ae.a,{type:"password",id:"password",name:"password",value:c.password,onChange:d,placeholder:"Clau d'acc\xe9s","aria-label":"Clau d'acc\xe9s","aria-describedby":"password-text"})),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:c.isLoading},c.isLoading?"Accedint ...":"Accedeix"),r.a.createElement(xe.a,{className:"mt-2",variant:"danger",show:c.showAlert,onClose:function(){return l({type:"closeAlert"})},dismissible:!0},r.a.createElement(xe.a.Heading,null,"Ups!"),r.a.createElement("ul",null,f))),r.a.createElement("hr",null),r.a.createElement("p",null,"No tens un compte?",r.a.createElement(i.b,{to:"/signup"}," Registra't!!!")))},Oe=function(e,t){switch(t.type){case"field":return Object(x.a)(Object(x.a)({},e),{},Object(y.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(x.a)(Object(x.a)({},e),{},{showAlert:!0,alertMessages:a});case"resetAlert":case"closeAlert":return Object(x.a)(Object(x.a)({},e),{},{showAlert:!1,alertMessages:[]});case"loading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!0});case"notLoading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1});default:return e}},Ne={username:"",name:"",email:"",password:"",isLoading:!1,showAlert:!1,alertMessages:[]};var Ce=function(e){var t=Object(n.useReducer)(Oe,Ne),a=Object(s.a)(t,2),c=a[0],l=a[1],m=RegExp(/^(([^<>()[].,;:s@"]+(.[^<>()[].,;:s@"]+)*)|(".+"))@(([^<>()[].,;:s@"]+.)+[^<>()[].,;:s@"]{2,})$/i),d=Object(u.g)(),f=function(e){var t=e.target,a=t.name,n=t.value;l({type:"field",fieldName:a,fieldValue:n})},p=function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),l({type:"resetAlert"}),c.name||l({type:"alert",alertMessage:"Has d'indicar un nom"}),c.username){t.next=7;break}l({type:"alert",alertMessage:"Has d'indicar un usuari"}),t.next=11;break;case 7:return t.next=9,re.checkusername(c.username);case 9:200===t.sent&&l({type:"alert",alertMessage:"L'usuari ".concat(c.username," ja existeix, escull un altre")});case 11:if(c.email){t.next=15;break}l({type:"alert",alertMessage:"Has d'indicar un email"}),t.next=19;break;case 15:return t.next=17,re.checkemail(c.email);case 17:200===t.sent&&l({type:"alert",alertMessage:"L'email ".concat(c.email," ja existeix, escull un altre")});case 19:m.test(c.email)||l({type:"alert",alertMessage:"El format del email \xe9s incorrecte"}),c.password||l({type:"alert",alertMessage:"Has d'indicar una clau d'acc\xe9s"}),c.password.length<8&&l({type:"alert",alertMessage:"La clau d'acc\xe9s ha de tenir un minim de 8 car\xe0cters"}),c.showAlert||(l({type:"loading"}),re.signup(c.username,c.name,c.email,c.password).then((function(t){e.dispatch({type:"login",user:t}),d.push("/")})).catch((function(e){return l({type:"alert",alertMessage:e.response.data.message})})),l({type:"notLoading"}));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=c.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement("h4",null,"Nou usuari a Nem De Festa !!"),r.a.createElement("a",{href:re.google(),className:"btn btn-danger w-100"},r.a.createElement("span",null,r.a.createElement(M.a,null),"\xa0\xa0Registra't amb Google")),r.a.createElement("hr",null),r.a.createElement(O.a,{onSubmit:p,className:"w-100"},r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"name-text"},"Nom")),r.a.createElement(ae.a,{id:"name",name:"name",type:"text",value:c.name,onChange:f,placeholder:"Nom i Cognoms","aria-label":"Nom i Cognoms","aria-describedby":"name-text"})),r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"name-email"},"@")),r.a.createElement(ae.a,{id:"email",name:"email",type:"text",value:c.email,onChange:f,placeholder:"Correu electr\xf2nic","aria-label":"Correu electr\xf2nic","aria-describedby":"name-email"})),r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"username-text"},"Usuari")),r.a.createElement(ae.a,{id:"username",name:"username",type:"text",value:c.username,onChange:f,placeholder:"Usuari","aria-label":"Usuari","aria-describedby":"username-text"})),r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"password-text"},"Clau")),r.a.createElement(ae.a,{type:"password",id:"password",name:"password",value:c.password,onChange:f,placeholder:"Clau d'acc\xe9s","aria-label":"Clau d'acc\xe9s","aria-describedby":"password-text"})),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:c.isLoading},c.isLoading?"Registrant ...":"Registrar"),r.a.createElement(xe.a,{className:"mt-2",variant:"danger",show:c.showAlert,onClose:function(){return l({type:"closeAlert"})},dismissible:!0},r.a.createElement(xe.a.Heading,null,"Ups!"),r.a.createElement("ul",null,g))),r.a.createElement("hr",null),r.a.createElement("p",null,"Ja tens un compte?",r.a.createElement(i.b,{to:"/login"}," Entra!!!")))},De=function(e,t){switch(t.type){case"field":return Object(x.a)(Object(x.a)({},e),{},Object(y.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(x.a)(Object(x.a)({},e),{},{showAlert:!0,alertMessages:a});case"resetAlert":case"closeAlert":return Object(x.a)(Object(x.a)({},e),{},{showAlert:!1,alertMessages:[]});case"loading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!0});case"notLoading":return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1});default:return e}},Me=RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i);var Le=function(e){var t={image:e.user.image,username:e.user.username,name:e.user.name,email:e.user.email,isLoading:!1,showAlert:!1,alertMessages:[],activities:[],comments:[],images:[]},a=Object(n.useReducer)(De,t),c=Object(s.a)(a,2),l=c[0],i=c[1],m=Object(u.g)(),d=function(){var t=Object(K.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,ne.activities(e.user._id);case 3:return t.t1=t.sent,t.t2={type:"field",fieldName:"activities",fieldValue:t.t1},(0,t.t0)(t.t2),t.t3=i,t.next=9,ne.comments(e.user._id);case 9:return t.t4=t.sent,t.t5={type:"field",fieldName:"comments",fieldValue:t.t4},(0,t.t3)(t.t5),t.t6=i,t.next=15,ne.images(e.user._id);case 15:t.t7=t.sent,t.t8={type:"field",fieldName:"images",fieldValue:t.t7},(0,t.t6)(t.t8);case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){d()}),[]);var f=function(){d()},p=function(e){var t=e.target,a=t.name,n=t.value;i({type:"field",fieldName:a,fieldValue:n})},g=function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),i({type:"resetAlert"}),l.name||i({type:"alert",alertMessage:"Has d'indicar un nom"}),l.username){t.next=7;break}i({type:"alert",alertMessage:"Has d'indicar un usuari"}),t.next=11;break;case 7:return t.next=9,ne.checkusername(e.user._id,l.username);case 9:200===t.sent&&i({type:"alert",alertMessage:"L'usuari ".concat(l.username," ja existeix, escull un altre")});case 11:if(l.email){t.next=15;break}i({type:"alert",alertMessage:"Has d'indicar un email"}),t.next=19;break;case 15:return t.next=17,ne.checkemail(e.user._id,l.email);case 17:200===t.sent&&i({type:"alert",alertMessage:"L'email ".concat(l.email," ja existeix, escull un altre")});case 19:Me.test(l.email)||i({type:"alert",alertMessage:"El format del email \xe9s incorrecte"}),l.showAlert||(i({type:"loading"}),ne.save(l.username,l.name,l.email).then((function(t){e.callback({type:"login",user:t})})).catch((function(e){return i({type:"alert",alertMessage:e.response.data.message})})),i({type:"notLoading"}));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(K.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.logout();case 2:e.callback({type:"logout"}),m.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=l.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)})),b=l.activities.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ue,{user:e.user,activity:t,onClick:f}))})),y=l.comments.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,comment:t,onClick:f}))})),x=l.images.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(me,{user:e.user,image:t,onClick:f}))}));return r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement("h4",null,"El teu perfil"),r.a.createElement("hr",null),r.a.createElement(le,{onUpload:function(t){i({type:"field",fieldName:"image",fieldValue:t.image}),e.callback({type:"login",user:t})},image:l.image}),r.a.createElement("hr",null),r.a.createElement(O.a,{onSubmit:g,className:"w-100"},r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"username-text"},"Usuari")),r.a.createElement(ae.a,{id:"username",name:"username",type:"text",value:l.username,onChange:p,placeholder:"Usuari","aria-label":"Usuari","aria-describedby":"username-text"})),r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"name-text"},"Nom")),r.a.createElement(ae.a,{id:"name",name:"name",type:"text",value:l.name,onChange:p,placeholder:"Nom i Cognoms","aria-label":"Nom i Cognoms","aria-describedby":"name-text"})),r.a.createElement(C.a,{className:"mb-3"},r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,{id:"name-email"},"@")),r.a.createElement(ae.a,{id:"email",name:"email",type:"text",value:l.email,onChange:p,placeholder:"Correu electr\xf2nic","aria-label":"Correu electr\xf2nic","aria-describedby":"name-email"})),r.a.createElement(te.a,{className:"mt-2 w-100"},r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"0"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha realitzat ",l.comments.length," comentaris",r.a.createElement(Z.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"0"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},y)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha publicat ",l.images.length," imatges",r.a.createElement(E.d,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"1"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},x)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Assitir\xe0 a ",l.activities.length," activitats",r.a.createElement(de.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"2"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},b))))),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:l.isLoading},l.isLoading?"Salvant ...":"Salvar"),r.a.createElement(D.a,{className:"btn btn-danger w-100 mt-2",onClick:h,disabled:l.isLoading},"Tanca sessi\xf3"),r.a.createElement(xe.a,{className:"mt-2",variant:"danger",show:l.showAlert,onClose:function(){return i({type:"closeAlert"})},dismissible:!0},r.a.createElement(xe.a.Heading,null,"Ups!"),r.a.createElement("ul",null,v))),r.a.createElement(X.a,{show:l.isLoading,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(X.a.Header,null,r.a.createElement(X.a.Title,null,"Guardant la Informaci\xf3")),r.a.createElement(X.a.Body,null,r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement(w.a,{animation:"border",variant:"success",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Grabant..."))))))},Te={location:{gpsLocation:{coordinates:[0,0]}},locations:[],activities:[],images:[],likes:[],unlikes:[],comments:[],attendees:[]};var Se=function(e){var t=Object(u.i)().id,a=Object(n.useState)(Te),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){_.get(e).then((function(e){return i(e)}))};Object(n.useEffect)((function(){o(t)}),[]);var m=function(){o(t)},d=l.activities.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ue,{user:e.user,activity:t,onClick:m,showLocation:!0}))})),f=l.locations,p={lat:l.location.gpsLocation.coordinates[0],lng:l.location.gpsLocation.coordinates[1]},g=l.comments.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,comment:t,onClick:m}))})),h=l.images.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(me,{user:e.user,image:t,onClick:m}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{user:e.user,event:l,showImage:!1,onClick:m}),r.a.createElement(te.a,{defaultActiveKey:"0",className:"mt-2"},r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"0"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},l.activities.length," Activitats",r.a.createElement(de.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"0"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},d)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Localitzacions",r.a.createElement(E.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"1"},r.a.createElement(I.a.Body,null,r.a.createElement(se,{center:p,points:f,zoom:15})))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},l.comments.length," Comentaris",r.a.createElement(Z.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"2"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},g)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"3"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},l.images.length," Imatges",r.a.createElement(E.d,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"3"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},h))))))};a(38);var He=function(e){var t=e.event;return r.a.createElement(I.a,{className:"bg-success text-white mb",border:"success"},r.a.createElement(i.b,{to:"/events/"+t._id,className:"text-white"},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null,t.name),r.a.createElement(I.a.Text,null,"Desde: ",T()(t.fromDate).format("DD-MM-YYYY"),r.a.createElement("br",null),"Fins: ",T()(t.toDate).format("DD-MM-YYYY")))))};var Ae=function(e){var t=Object(n.useState)({lat:0,lng:0}),a=Object(s.a)(t,2),c=a[0],l=a[1],i=JSON.parse(sessionStorage.getItem("events"))||[];Object(n.useEffect)((function(){i.length>0&&l({lat:i[0].location.gpsLocation.coordinates[0],lng:i[0].location.gpsLocation.coordinates[1]})}),[]);var o=i.map((function(t){return r.a.createElement(ie.b,{key:t._id,position:{lat:t.location.gpsLocation.coordinates[0],lng:t.location.gpsLocation.coordinates[1]}},r.a.createElement(He,{event:t,user:e.user}))}));return r.a.createElement(ie.c,{googleMapsApiKey:"AIzaSyDf8lFaNmy0tTkfhhBgiJHR4N_yO_8Sfps"},r.a.createElement(ie.a,{mapContainerStyle:{minWidth:"100%",width:"100%",minHeight:"100%",height:"100%",overflow:"auto"},center:c,zoom:10},o))};a(123);a(38);var Ye={location:{gpsLocation:{coordinates:[0,0]}},images:[],likes:[],unlikes:[],comments:[],attendees:[]};var _e=function(e){var t=Object(u.i)().id,a=Object(n.useState)(Ye),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){V.get(e).then((function(e){return i(e)}))};Object(n.useEffect)((function(){o(t)}),[]),console.log(l);var m=function(){o(t)},d=l.comments.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,comment:t,onClick:m}))})),f=l.images.map((function(t){return r.a.createElement(Q.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(me,{user:e.user,image:t,onClick:m}))})),p={lat:l.location.gpsLocation.coordinates[0],lng:l.location.gpsLocation.coordinates[1]},g=[l.location];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{user:e.user,activity:l,onClick:m,showLocation:!1}),r.a.createElement(te.a,{defaultActiveKey:"1",className:"mt-2"},r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"On es celebra?",r.a.createElement(E.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"1"},r.a.createElement(I.a.Body,null,r.a.createElement(se,{center:p,points:g,zoom:15})))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"S'han realizat ",l.comments.length," comentaris",r.a.createElement(Z.a,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"2"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},d)))),r.a.createElement(I.a,null,r.a.createElement(te.a.Toggle,{as:I.a.Header,eventKey:"3"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Tenim ",l.images.length," imatges",r.a.createElement(E.d,{size:"20px"}))),r.a.createElement(te.a.Collapse,{eventKey:"3"},r.a.createElement(I.a.Body,null,r.a.createElement(Q.a,{variant:"flush"},f))))))};a(124).config();var Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"login":var a=t.user;return sessionStorage.setItem("user",JSON.stringify(a)),{user:a};case"logout":return sessionStorage.removeItem("user"),{user:null};default:return e}},ze={user:JSON.parse(sessionStorage.getItem("user")||null)};var Be=function(){var e=Object(n.useReducer)(Ie,ze),t=Object(s.a)(e,2),a=t[0],c=t[1],l=a.user;return r.a.createElement(o.a,{className:"fill-window overflow-auto pb-5"},r.a.createElement(f,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(ye,{user:l})),r.a.createElement(u.b,{exact:!0,path:"/map"},r.a.createElement(Ae,{user:l})),r.a.createElement(u.b,{path:"/login"},r.a.createElement(ke,{dispatch:c})),r.a.createElement(u.b,{path:"/signup"},r.a.createElement(Ce,{dispatch:c})),r.a.createElement(u.b,{path:"/profile/:id",component:fe}),r.a.createElement(u.b,{exact:!0,path:"/events"},r.a.createElement(ye,{user:l})),r.a.createElement(u.b,{path:"/events/:id"},r.a.createElement(Se,{user:l})),r.a.createElement(u.b,{path:"/activities/:id"},r.a.createElement(_e,{user:l})),r.a.createElement(b,{user:l,callback:c,exact:!0,path:"/profile",component:Le})),r.a.createElement(h,{user:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,a){e.exports=a(127)}},[[93,1,2]]]);
//# sourceMappingURL=main.89e013c8.chunk.js.map