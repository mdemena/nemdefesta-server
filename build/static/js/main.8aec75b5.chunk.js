(this["webpackJsonpnemdefesta-app"]=this["webpackJsonpnemdefesta-app"]||[]).push([[0],{125:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),l=a.n(c),i=a(12),s=a(8),o=(a(101),a(136)),u=a(14),m=a(146),d=a(85),f=a(72);var p=function(){var e=Object(u.h)(),t=Object(u.g)(),a="/"===e.pathname?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{size:"25px",className:"bg-white text-success rounded mr-2",onClick:function(){t.goBack()}});return"/"===e.pathname?r.a.Fragment:f.b,r.a.createElement(m.a,{fixed:"top",bg:"success",className:"d-flex flex-row"},r.a.createElement(m.a.Text,{className:"text-white"},a),r.a.createElement(m.a.Brand,{to:"/",className:"d-flex flex-row align-items-center"},r.a.createElement(d.a,{className:"text-white"}),r.a.createElement("span",{className:"ml-2 text-white"},"Nem De Festa !!")))},g=a(134),E=a(148),h=a(22);var v=function(e){var t=Object(u.h)(),a=function(e){var a=t.pathname===e?"active ":"";return a+="d-flex flex-column justify-content-center align-items-center mr-4 ml-4 text-white"},n=e.user?r.a.createElement(g.a,{src:e.user.image,alt:e.user.image,className:"avatarMenu",fluid:!0,roundedCircle:!0}):r.a.createElement(h.g,{size:"20px"});return r.a.createElement(m.a,{fixed:"bottom",bg:"success"},r.a.createElement(E.a,{className:"justify-content-around ml-auto mr-auto"},r.a.createElement(i.c,{to:"/",className:a("/")},r.a.createElement(h.c,{size:"20px"}),"Inici"),r.a.createElement(i.c,{to:"/map",className:a("/map")},r.a.createElement(h.b,{size:"20px"}),"Mapa"),r.a.createElement(i.c,{to:"/profile",className:a("/login")},n,"Perfil")))},b=a(93),y=function(e){var t=e.component,a=e.user,n=e.callback,c=Object(b.a)(e,["component","user","callback"]);return r.a.createElement(u.b,Object.assign({},c,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,{callback:n,user:a})):(n(void 0),r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}}))}}))},x=a(20),w=a(5),j=a(140),k=a(141),O=a(142),N=a(145),C=a(88),M=a(135),D=a(137),L=a(89),A=a(13),T=a.n(A);a(37);var H=function(e){var t={searchText:e.searchEvents||"",fromDate:e.fromDate||T()().format("YYYY-MM-DD"),toDate:e.toDate||T()().add(1,"month").format("YYYY-MM-DD")},a=Object(n.useState)(t),c=Object(s.a)(a,2),l=c[0],i=c[1],u=function(e){i(Object(w.a)(Object(w.a)({},l),{},Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement(N.a,{inline:!0,onSubmit:function(t){t.preventDefault(),e.onChange(l)},className:"w-100"},r.a.createElement(N.a.Row,{className:"align-items-center w-100 mt-2"},r.a.createElement(C.a,null,r.a.createElement(M.a,null,r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"fromdate-text"},"Inici:")),r.a.createElement(N.a.Control,{type:"date",id:"fromDate",name:"fromDate",value:l.fromDate,onChange:u,"aria-label":"Inici","aria-describedby":"fromdate-text"}))),r.a.createElement(C.a,null,r.a.createElement(M.a,{className:"inputRow"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"todate-text"},"Fi:")),r.a.createElement(N.a.Control,{type:"date",id:"toDate",name:"toDate",value:l.toDate,onChange:u,"aria-label":"Fi","aria-describedby":"todate-text"})))),r.a.createElement(o.a,{className:"d-flex flex-row justify-content-center pt-2"},r.a.createElement(D.a,{variant:"success",type:"submit",className:"d-flex flex-row justify-content-around align-items-center w-50"},"Cercar",r.a.createElement(L.a,null))))},S=a(27),_=a(28),F=a.n(_),Y=new function e(){var t=this;Object(S.a)(this,e),this.create=function(e,a,n,r,c,l,i,s,o){return t.service.post("/add",{name:e,description:a,fromDate:n,toDate:r,locationName:c,locationAddress:l,locationFormattedAddress:i,locationCoordinatesLng:s,locationCoordinatesLat:o}).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n,r,c,l,i,s,o,u){return t.service.put("/".concat(e),{name:a,description:n,fromDate:r,toDate:c,locationName:l,locationAddress:i,locationFormattedAddress:s,locationCoordinatesLng:o,locationCoordinatesLat:u}).then((function(e){return e.data}))},this.search=function(e,a,n){return t.service.post("/",{fromDate:e,toDate:a,searchText:n}).then((function(e){return e.data}))},this.listOfAttendee=function(e){return t.service.get("/attendee/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.attendee=function(e){return t.service.patch("/attendee/".concat(e)).then((function(e){return e.data}))},this.upload=function(e,a){var n=new FormData;return n.append("image",a),t.service.patch("/upload/".concat(e),n).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=F.a.create({baseURL:"".concat("http://dev.nemdefesta.cat/api","/events"),withCredentials:!0});this.service=a},B=a(151),I=a(10),K=a.n(I),z=a(17),P=a(150),R=a(138),U=a(139),V=a(92),J=a(149),q=a(41),W=new function e(){var t=this;Object(S.a)(this,e),this.create=function(e,a,n,r,c,l){return t.service.post("/add/".concat(e),{name:a,description:n,fromDate:r,toDate:c,location:l}).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n,r,c,l){return t.service.put("/".concat(e),{name:a,description:n,fromDate:r,toDate:c,location:l}).then((function(e){return e.data}))},this.search=function(e,a,n){return t.service.post("/",{fromDate:e,toDate:a,searchText:n}).then((function(e){return e.data}))},this.listOfEvent=function(e){return t.service.get("/event/".concat(e)).then((function(e){return e.data}))},this.listOfAttendee=function(e){return t.service.get("/attendee/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.attendee=function(e){return t.service.patch("/attendee/".concat(e)).then((function(e){return e.data}))},this.upload=function(e,a){var n=new FormData;return n.append("image",a),t.service.patch("/upload/".concat(e),n).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=F.a.create({baseURL:"".concat("http://dev.nemdefesta.cat/api","/activities"),withCredentials:!0});this.service=a},$=new function e(){var t=this;Object(S.a)(this,e),this.create=function(e,a,n,r){return t.service.post("/",{title:e,description:a,event:n,activity:r}).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n){return t.service.put("/".concat(e),{title:a,description:n}).then((function(e){return e.data}))},this.list=function(){return t.service.get("/").then((function(e){return e.data}))},this.listOfEvent=function(e){return t.service.get("/event/".concat(e)).then((function(e){return e.data}))},this.listOfActivity=function(e){return t.service.get("/activity/".concat(e)).then((function(e){return e.data}))},this.listOfUser=function(e){return t.service.get("/user/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=F.a.create({baseURL:"".concat("http://dev.nemdefesta.cat/api","/comments"),withCredentials:!0});this.service=a},G=new function e(){var t=this;Object(S.a)(this,e),this.create=function(e,a,n,r,c){var l=new FormData;return l.append("title",e),l.append("description",a),n&&l.append("event",n),r&&l.append("activity",r),l.append("image",c),t.service.post("/",l).then((function(e){return e.data}))},this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n){return t.service.put("/".concat(e),{title:a,description:n}).then((function(e){return e.data}))},this.list=function(){return t.service.get("/").then((function(e){return e.data}))},this.listOfEvent=function(e){return t.service.get("/event/".concat(e)).then((function(e){return e.data}))},this.listOfActivity=function(e){return t.service.get("/activity/".concat(e)).then((function(e){return e.data}))},this.like=function(e){return t.service.patch("/like/".concat(e)).then((function(e){return e.data}))},this.unlike=function(e){return t.service.patch("/unlike/".concat(e)).then((function(e){return e.data}))},this.delete=function(e){return t.service.delete("/".concat(e)).then((function(e){return e.data}))};var a=F.a.create({baseURL:"".concat("http://dev.nemdefesta.cat/api","/images"),withCredentials:!0});this.service=a};var Q=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a.Title,{as:"h3",className:"bg-warning"},r.a.createElement(q.a,{className:"rounded mr-2"}),r.a.createElement("strong",{className:"mr-auto"},"\xa1\xa1\xa1 No est\xe0s autenticat !!!")),r.a.createElement(J.a.Content,null,"Pots ",r.a.createElement(i.b,{to:"/login"},"accedir")," o"," ",r.a.createElement(i.b,{to:"/signup"},"registrar-te")))};var X=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useRef)(null),f=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=20;break}t.t0=e.type,t.next="event"===t.t0?4:"activity"===t.t0?7:"comment"===t.t0?10:"image"===t.t0?13:16;break;case 4:return t.next=6,Y.like(e.id);case 6:return t.abrupt("break",17);case 7:return t.next=9,W.like(e.id);case 9:return t.abrupt("break",17);case 10:return t.next=12,$.like(e.id);case 12:return t.abrupt("break",17);case 13:return t.next=15,G.like(e.id);case 15:case 16:return t.abrupt("break",17);case 17:e.onClick(),t.next=22;break;case 20:l(!c),m(a.target);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{ref:d},r.a.createElement(P.a,{key:e.id,placement:"right",overlay:r.a.createElement(R.a,{id:"tooltip-like"},r.a.createElement("strong",null,"M'agrada"),".")},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:f,alt:"M'agrada"},r.a.createElement(q.c,null),r.a.createElement(U.a,{variant:"light"},e.quantity))),r.a.createElement(V.a,{show:c,target:u,container:d.current,containerPadding:20,placement:"top",rootClose:!0,onHide:function(){l(!1)}},r.a.createElement(J.a,{id:"popover-contained"},r.a.createElement(Q,null))))};var Z=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useRef)(null),f=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=20;break}t.t0=e.type,t.next="event"===t.t0?4:"activity"===t.t0?7:"comment"===t.t0?10:"image"===t.t0?13:16;break;case 4:return t.next=6,Y.unlike(e.id);case 6:return t.abrupt("break",17);case 7:return t.next=9,W.unlike(e.id);case 9:return t.abrupt("break",17);case 10:return t.next=12,$.unlike(e.id);case 12:return t.abrupt("break",17);case 13:return t.next=15,G.unlike(e.id);case 15:case 16:return t.abrupt("break",17);case 17:e.onClick(),t.next=22;break;case 20:l(!c),m(a.target);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{ref:d},r.a.createElement(P.a,{key:e.id,placement:"right",overlay:r.a.createElement(R.a,{id:"tooltip-unlike"},r.a.createElement("strong",null,"No m'agrada"),".")},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:f},r.a.createElement(q.b,null),r.a.createElement(U.a,{variant:"light"},e.quantity))),r.a.createElement(V.a,{show:c,target:u,container:d.current,containerPadding:20,placement:"top",rootClose:!0,onHide:function(){l(!1)}},r.a.createElement(J.a,{id:"popover-contained"},r.a.createElement(Q,null))))};var ee=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useRef)(null),f=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=14;break}t.t0=e.type,t.next="event"===t.t0?4:"activity"===t.t0?7:10;break;case 4:return t.next=6,Y.attendee(e.id);case 6:return t.abrupt("break",11);case 7:return t.next=9,W.attendee(e.id);case 9:case 10:return t.abrupt("break",11);case 11:e.onClick(),t.next=16;break;case 14:l(!c),m(a.target);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=e.user&&e.array.includes(e.user._id)?r.a.createElement(h.f,null):r.a.createElement(h.e,null);return r.a.createElement("div",{ref:d},r.a.createElement(P.a,{key:e.id,placement:"left",overlay:r.a.createElement(R.a,{id:"tooltip-attendee"},r.a.createElement("strong",null,"Persones que assitiran"),".")},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:f},p,r.a.createElement(U.a,{variant:"light"},e.array.length))),r.a.createElement(V.a,{show:c,target:u,container:d.current,containerPadding:20,placement:"top",rootClose:!0,onHide:function(){l(!1)}},r.a.createElement(J.a,{id:"popover-contained"},r.a.createElement(Q,null))))},te=a(152),ae=a(144),ne=a(30);var re=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){l(!c)},o=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="event"===t.t0?3:"activity"===t.t0?6:"comment"===t.t0?9:"image"===t.t0?12:15;break;case 3:return t.next=5,Y.delete(e.id);case 5:return t.abrupt("break",16);case 6:return t.next=8,W.delete(e.id);case 8:return t.abrupt("break",16);case 9:return t.next=11,$.delete(e.id);case 11:return t.abrupt("break",16);case 12:return t.next=14,G.delete(e.id);case 14:case 15:return t.abrupt("break",16);case 16:i(),e.onClick();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){switch(e.type){case"event":return"event";case"activity":return"activitat";case"comment":return"comentari";case"image":return"amatge";default:return"a saber.."}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{key:e.id,placement:"left",overlay:r.a.createElement(R.a,{id:"tooltip-delete"},r.a.createElement("strong",null,"Eliminar ",u()),".")},r.a.createElement(q.d,{onClick:i})),r.a.createElement(ae.a,{show:c,onHide:i,centered:!0},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,"Eliminar ",u())),r.a.createElement(ae.a.Body,null,"Segur que ho vols eliminar?"),r.a.createElement(ae.a.Footer,null,r.a.createElement(D.a,{variant:"success",onClick:i},"No"),r.a.createElement(D.a,{variant:"danger",onClick:o},"Eliminar"))))},ce=a(147),le=a(87),ie=new function e(){var t=this;Object(S.a)(this,e),this.get=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.save=function(e,a,n){return t.service.put("/",{username:e,name:a,email:n}).then((function(e){return e.data}))},this.upload=function(e){var a=new FormData;return a.append("image",e),t.service.patch("/upload",a).then((function(e){return e.data}))},this.checkusername=function(e,a){return t.service.post("/checkusername",{id:e,username:a}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.checkemail=function(e,a){return t.service.post("/checkemail",{id:e,email:a}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.events=function(e){return t.service.get("/events/".concat(e)).then((function(e){return e.data}))},this.activities=function(e){return t.service.get("/activities/".concat(e)).then((function(e){return e.data}))},this.comments=function(e){return t.service.get("/comments/".concat(e)).then((function(e){return e.data}))},this.images=function(e){return t.service.get("/images/".concat(e)).then((function(e){return e.data}))};var a=F.a.create({baseURL:"".concat("http://dev.nemdefesta.cat/api","/users"),withCredentials:!0});this.service=a},se=new function e(){var t=this;Object(S.a)(this,e),this.signup=function(e,a,n,r){return t.service.post("/signup",{username:e,name:a,email:n,password:r}).then((function(e){return e.data}))},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then((function(e){return e.data}))},this.checkusername=function(e){return t.service.post("/checkusername",{username:e}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.checkemail=function(e){return t.service.post("/checkemail",{email:e}).then((function(e){return e.status})).catch((function(e){return e.status}))},this.google=function(){return"http://dev.nemdefesta.cat/api/google"},this.logout=function(){return t.service.post("/logout",{}).then((function(e){return 200===e.status}))},this.loggedin=function(){return t.service.post("/loggedin").then((function(e){return 200===e.status})).catch((function(e){return 200===e.status}))};var a=F.a.create({baseURL:"".concat("http://dev.nemdefesta.cat/api","/auth"),withCredentials:!0});this.service=a},oe=function(e,t){switch(t.type){case"field":return Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"openModal":return Object(w.a)(Object(w.a)({},e),{},{isShowing:!0});case"closeModal":return Object(w.a)(Object(w.a)({},e),{},{isShowing:!1});case"loading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});default:return e}};var ue=function(e){var t={image:e.image,isLoading:!1,isShowing:!1},a=Object(n.useReducer)(oe,t),c=Object(s.a)(a,2),l=c[0],i=c[1],u=function(){return i({type:"closeModal"})};return l.isLoading?r.a.createElement(j.a,{animation:"border",variant:"success",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Carregant...")):r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center w-100"},r.a.createElement(g.a,{src:e.image,alt:e.image,className:"avatar",fluid:!0,roundedCircle:!0,thumbnail:!0,onClick:function(){return i({type:e.readOnly?"closeModal":"openModal"})}}),r.a.createElement(ae.a,{show:l.isShowing,onHide:u,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,"Selecciona una imatge")),r.a.createElement(ae.a.Body,null,r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(le.a,{id:"image",name:"image",type:"file",onChange:function(e){var t=e.target.files[0];i({type:"field",fieldName:"image",fieldValue:t})},placeholder:"Fitxer de la imatge","aria-label":"Fitxer de la imatge","aria-describedby":"image-text"}))),r.a.createElement(ae.a.Footer,null,r.a.createElement(D.a,{variant:"secondary",onClick:u},"Tanca"),r.a.createElement(D.a,{variant:"primary",onClick:function(t){u(),i({type:"loading"}),se.loggedin().then((function(t){t&&ie.upload(l.image).then((function(t){e.onUpload(t),i({type:"notLoading"})}))}))}},"Selecciona"))))},me=a(43),de={minWidth:"100%",width:"100%",minHeight:"100%",height:"300px",overflow:"auto",border:"1px solid green",borderRadius:"8px"};var fe=function(e){var t=Object(me.d)({googleMapsApiKey:"AIzaSyDf8lFaNmy0tTkfhhBgiJHR4N_yO_8Sfps",googleMapsClientId:"976708241453-g2inohg46v3tjfa2vlhmces4v53mhb4k.apps.googleusercontent.com",language:"es"}),a=t.isLoaded,n=t.loadError,c=e.center,l=e.zoom||17,i=e.points.map((function(e){return r.a.createElement(me.c,{key:e._id,position:{lat:e.gpsLocation.coordinates[0],lng:e.gpsLocation.coordinates[1]}})}));return a?n?r.a.createElement("div",null,"El mapa no es pot carregar ara."):r.a.createElement(me.a,{mapContainerStyle:de,center:c,zoom:l},i):r.a.createElement(j.a,{variant:"success"})};var pe=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){l(!c)};return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:i},r.a.createElement(h.b,null)),r.a.createElement(ae.a,{show:c,onHide:i,centered:!0},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,e.location.name)),r.a.createElement(ae.a.Body,null,r.a.createElement(fe,{center:{lat:e.location.gpsLocation.coordinates[0],lng:e.location.gpsLocation.coordinates[1]},points:[e.location]}))))};a(37);var ge=function(e){var t=e.activity,a=Object(u.g)(),n=void 0===e.showImage||e.showImage,c=void 0===e.showDescription||e.showDescription,l=void 0===e.showDates||e.showDates,i=void 0===e.showLocation||e.showLocation,s=void 0===e.showButtons||e.showButtons,o=function(){e.onClick()},m=function(e){a.push("/activities/"+e)},d=n?r.a.createElement(B.a.Img,{variant:"top",src:t.image,alt:t.name,className:"mw-100",onClick:function(){return m(t._id)}}):r.a.createElement(r.a.Fragment,null),f=c?r.a.createElement(B.a.Text,null,t.description):r.a.createElement(r.a.Fragment,null),p=l?r.a.createElement(B.a.Text,{className:"d-flex flex-column"},r.a.createElement("span",null,r.a.createElement("small",null,"Des del ",T()(t.fromDate).format("DD-MM-YYYY")," a les"," ",T()(t.fromDate).format("HH:MM"))),r.a.createElement("span",null,r.a.createElement("small",null,"Fins el ",T()(t.toDate).format("DD-MM-YYYY")," a les"," ",T()(t.toDate).format("HH:MM")))):r.a.createElement(r.a.Fragment,null),g=t.location&&i?r.a.createElement(pe,{location:t.location}):r.a.createElement(r.a.Fragment,null),E=s?r.a.createElement(B.a.Footer,{className:"bg-success text-white"},r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},g,r.a.createElement(X,{type:"activity",id:t._id,quantity:t.likes.length,user:e.user,onClick:o}),r.a.createElement(Z,{type:"activity",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:o}),r.a.createElement(xe,{type:"activity",id:t._id,array:t.comments,user:e.user,onClick:o}),r.a.createElement(ee,{type:"activity",id:t._id,array:t.attendees,user:e.user,onClick:o}))):r.a.createElement(r.a.Fragment,null);return r.a.createElement(B.a,{border:"success",className:"cardElement"},r.a.createElement(B.a.Body,{onClick:function(){return m(t._id)}},d,r.a.createElement(B.a.Title,null,t.name),f,p),E)};a(37);var Ee=function(e){var t=e.image,a=function(){e.onClick()},n=e.user&&e.user._id===t.user._id?r.a.createElement(re,{type:"image",id:t._id,onClick:a}):r.a.createElement(r.a.Fragment,null);return r.a.createElement(B.a,{className:"cardElement",border:"success"},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,t.title),r.a.createElement(B.a.Img,{src:t.image,alt:t.title}),r.a.createElement(B.a.Text,{className:"pt-2"},t.description),r.a.createElement(B.a.Text,null,r.a.createElement("small",null,"Publicada el ",T()(t.createAt).format("DD-MM-YYYY")," a les"," ",T()(t.createAt).format("HH:MM")))),r.a.createElement(B.a.Footer,{className:"bg-success text-white"},r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},r.a.createElement(X,{type:"image",id:t._id,quantity:t.likes.length,user:e.user,onClick:a}),r.a.createElement(Z,{type:"image",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:a}),n)))},he=a(51);var ve=function(e){var t=e.id||e.match.params.id,a=Object(n.useState)({}),c=Object(s.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)([]),g=Object(s.a)(p,2),E=g[0],v=g[1],b=Object(n.useState)([]),y=Object(s.a)(b,2),x=y[0],w=y[1],O=Object(n.useState)(!0),N=Object(s.a)(O,2),M=N[0],D=N[1];Object(n.useEffect)((function(){L()}),[]);var L=function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.t0=i,e.next=4,ie.get(t);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=v,e.next=9,ie.comments(t);case 9:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=f,e.next=14,ie.activities(t);case 14:return e.t5=e.sent,(0,e.t4)(e.t5),e.t6=w,e.next=19,ie.images(t);case 19:e.t7=e.sent,(0,e.t6)(e.t7),D(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){L()},T=d.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,activity:t,onClick:A}))})),H=E.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ye,{user:e.user,comment:t,onClick:A}))})),S=x.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(Ee,{user:e.user,image:t,onClick:A}))}));return M?r.a.createElement(o.a,{fluid:!0,className:"fill-window d-flex flex-column justify-content-center align-items-center"},r.a.createElement(j.a,{animation:"border",variant:"success",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Carregant..."))):r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement(ue,{image:l.image,readOnly:!0}),r.a.createElement("h2",null,l.username),r.a.createElement(o.a,{className:"d-flex flex-column"},r.a.createElement(k.a,null,r.a.createElement(C.a,null,"Nom:"),r.a.createElement(C.a,{className:"text-left"},l.name)),r.a.createElement(k.a,null,r.a.createElement(C.a,null,"Email:"),r.a.createElement(C.a,null,l.email)),r.a.createElement(k.a,null,r.a.createElement("hr",null)),r.a.createElement(k.a,null,r.a.createElement(ce.a,{className:"mt-2 w-100"},r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"0"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha realitzat ",E.length," comentaris",r.a.createElement(ne.b,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"0"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},H)))),r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha publicat ",x.length," imatges",r.a.createElement(h.d,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"1"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},S)))),r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Assitir\xe0 a ",d.length," activitats",r.a.createElement(he.a,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"2"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},T))))))))};var be=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){l(!c)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"light",onClick:i},e.profile.username),r.a.createElement(ae.a,{show:c,onHide:i},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,"Perfil de ",e.profile.username)),r.a.createElement(ae.a.Body,null,r.a.createElement(ve,{id:e.profile._id}))))};a(37);var ye=function(e){var t=e.comment,a=function(){e.onClick()},n=e.user&&e.user._id===t.user._id?r.a.createElement(re,{type:"comment",id:t._id,onClick:a}):r.a.createElement(r.a.Fragment,null);return r.a.createElement(B.a,{className:"cardElement",border:"success"},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,t.title),r.a.createElement(B.a.Text,null,t.description),r.a.createElement(B.a.Text,null,r.a.createElement("small",null,"Comentari de ",r.a.createElement(be,{profile:t.user})," realitzat el"," ",T()(t.createdAt).format("DD-MM-YYYY HH:MM")))),r.a.createElement(B.a.Footer,{className:"bg-success text-white"},r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},r.a.createElement(X,{type:"comment",id:t._id,quantity:t.likes.length,user:e.user,onClick:a}),r.a.createElement(Z,{type:"comment",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:a}),n)))};var xe=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){e.onClick()},o=function(){e.array.length>0&&l(!c)},u=e.array.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ye,{user:e.user,comment:t,onClick:i}))}));return r.a.createElement("div",null,r.a.createElement(P.a,{key:e.id,placement:"left",overlay:r.a.createElement(R.a,{id:"tooltip-comment"},r.a.createElement("strong",null,"Comentaris"),".")},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center",onClick:o},r.a.createElement(ne.b,null),r.a.createElement(U.a,{variant:"light"},e.array.length))),r.a.createElement(ae.a,{show:c,onHide:o},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,"Comentaris")),r.a.createElement(ae.a.Body,null,r.a.createElement(te.a,{variant:"flush"},u))))};a(37);var we=function(e){var t=e.event,a=Object(u.g)(),n=void 0===e.showDescription||e.showDescription,c=void 0===e.showButtons||e.showButtons,l=void 0===e.showDates||e.showDates,i=void 0===e.showImage||e.showImage,s=function(){e.onClick()},o=function(e){a.push("/events/"+e)},m=i?r.a.createElement(B.a.Img,{variant:"top",src:t.image,alt:t.name,className:"mw-100",onClick:function(){return o(t._id)}}):r.a.createElement(r.a.Fragment,null),d=n?r.a.createElement(B.a.Text,null,t.description):r.a.createElement(r.a.Fragment,null),f=l?r.a.createElement(B.a.Text,null,r.a.createElement("small",null,"Des del ",T()(t.fromDate).format("DD-MM-YYYY")," fins el"," ",T()(t.toDate).format("DD-MM-YYYY"))):r.a.createElement(r.a.Fragment,null),p=c?r.a.createElement(B.a.Footer,{className:"bg-success text-white"},r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-items-center"},r.a.createElement(X,{type:"event",id:t._id,quantity:t.likes.length,user:e.user,onClick:s}),r.a.createElement(Z,{type:"event",id:t._id,quantity:t.unlikes.length,user:e.user,onClick:s}),r.a.createElement(xe,{type:"event",id:t._id,array:t.comments,user:e.user,onClick:s}),r.a.createElement(ee,{type:"event",id:t._id,array:t.attendees,user:e.user,onClick:s}))):r.a.createElement(r.a.Fragment,null);return r.a.createElement(B.a,{className:"cardEvent",border:"success"},m,r.a.createElement(B.a.Body,{onClick:function(){return o(t._id)}},r.a.createElement(B.a.Title,null,t.name),d,f),p)};a(37);var je=function(e,t){switch(t.type){case"field":return localStorage.setItem(t.fieldName,JSON.stringify(t.fieldValue)),Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"loading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});default:return e}},ke={searchText:JSON.parse(localStorage.getItem("searchText"))||"",fromDate:JSON.parse(localStorage.getItem("fromDate"))||T()().format("YYYY-MM-DD"),toDate:JSON.parse(localStorage.getItem("toDate"))||T()().add(1,"month").format("YYYY-MM-DD"),events:JSON.parse(localStorage.getItem("events"))||[],isLoading:!1,isShowing:!1,refresh:!1};var Oe=function(e){var t=Object(n.useReducer)(je,ke),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){u(c.fromDate,c.toDate,c.searchText)};function u(e,t,a){Y.search(e,t,a).then((function(e){l({type:"field",fieldName:"events",fieldValue:e})}))}Object(n.useEffect)((function(){u(c.fromDate,c.toDate,c.searchText)}),[]);var m=c.events.map((function(t){return r.a.createElement(we,{user:e.user,key:t._id,event:t,onClick:i})}));return c.isLoading?r.a.createElement(o.a,{fluid:!0,className:"fill-window d-flex flex-column justify-content-center align-items-center"},r.a.createElement(j.a,{animation:"border",variant:"success",size:"50px",role:"status"})):r.a.createElement(o.a,null,r.a.createElement(k.a,null,r.a.createElement(H,{searchEvents:c.searchEvents,fromDate:c.fromDate,toDate:c.toDate,onChange:function(e){var t=e.searchText,a=e.fromDate,n=e.toDate;l({type:"field",fieldName:"searchText",fieldValue:t}),l({type:"field",fieldName:"fromDate",fieldValue:a}),l({type:"field",fieldName:"toDate",fieldValue:n}),u(a,n,t)}})),r.a.createElement(k.a,{className:"mt-2"},r.a.createElement(O.a,null,m)))},Ne=a(143),Ce=function(e,t){switch(t.type){case"field":return Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(w.a)(Object(w.a)({},e),{},{showAlert:!0,alertMessages:a,isLoading:!1});case"resetAlert":case"closeAlert":return Object(w.a)(Object(w.a)({},e),{},{showAlert:!1,alertMessages:[]});case"login":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});case"googleAuth":return Object(w.a)(Object(w.a)({},e),{},{googleAuth:!0});default:return e}},Me={username:"",password:"",isLoading:!1,showAlert:!1,alertMessages:[]};var De=function(e){var t=Object(n.useReducer)(Ce,Me),a=Object(s.a)(t,2),c=a[0],l=a[1],m=Object(u.g)(),d=function(e){var t=e.target,a=t.name,n=t.value;l({type:"field",fieldName:a,fieldValue:n})},f=c.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement("h3",null,"Entra a Nem De Festa !!"),r.a.createElement("hr",null),r.a.createElement(N.a,{onSubmit:function(t){t.preventDefault(),l({type:"resetAlert"}),c.username||l({type:"alert",alertMessage:"Has d'indicar un usuari"}),c.password||l({type:"alert",alertMessage:"Has d'indicar una clau d'acc\xe9s"}),c.password.length<8&&l({type:"alert",alertMessage:"La clau d'acc\xe9s ha de tenir un minim de 8 car\xe0cters"}),c.showAlert||(l({type:"login"}),se.login(c.username,c.password).then((function(t){e.dispatch({type:"login",user:t}),m.push("/")})).catch((function(e){return l({type:"alert",alertMessage:e.response.data.message})})))},className:"w-100"},r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"username-text"},"Usuari:")),r.a.createElement(le.a,{id:"username",name:"username",type:"text",value:c.username,onChange:d,placeholder:"Usuari","aria-label":"Usuari","aria-describedby":"username-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"password-text"},"Clau:")),r.a.createElement(le.a,{type:"password",id:"password",name:"password",value:c.password,onChange:d,placeholder:"Clau d'acc\xe9s","aria-label":"Clau d'acc\xe9s","aria-describedby":"password-text"})),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:c.isLoading},c.isLoading?"Accedint ...":"Accedeix"),r.a.createElement(Ne.a,{className:"mt-2",variant:"danger",show:c.showAlert,onClose:function(){return l({type:"closeAlert"})},dismissible:!0},r.a.createElement(Ne.a.Heading,null,"Ups!"),r.a.createElement("ul",null,f))),r.a.createElement("hr",null),r.a.createElement("p",null,"No tens un compte?",r.a.createElement(i.b,{to:"/signup"}," Registra't!!!")))},Le=function(e,t){switch(t.type){case"field":return Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(w.a)(Object(w.a)({},e),{},{showAlert:!0,alertMessages:a});case"resetAlert":case"closeAlert":return Object(w.a)(Object(w.a)({},e),{},{showAlert:!1,alertMessages:[]});case"loading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});default:return e}},Ae={username:"",name:"",email:"",password:"",isLoading:!1,showAlert:!1,alertMessages:[]};var Te=function(e){var t=Object(n.useReducer)(Le,Ae),a=Object(s.a)(t,2),c=a[0],l=a[1],m=RegExp(/^(([^<>()[].,;:s@"]+(.[^<>()[].,;:s@"]+)*)|(".+"))@(([^<>()[].,;:s@"]+.)+[^<>()[].,;:s@"]{2,})$/i),d=Object(u.g)(),f=function(e){var t=e.target,a=t.name,n=t.value;l({type:"field",fieldName:a,fieldValue:n})},p=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),l({type:"resetAlert"}),c.name||l({type:"alert",alertMessage:"Has d'indicar un nom"}),c.username){t.next=7;break}l({type:"alert",alertMessage:"Has d'indicar un usuari"}),t.next=11;break;case 7:return t.next=9,se.checkusername(c.username);case 9:200===t.sent&&l({type:"alert",alertMessage:"L'usuari ".concat(c.username," ja existeix, escull un altre")});case 11:if(c.email){t.next=15;break}l({type:"alert",alertMessage:"Has d'indicar un email"}),t.next=19;break;case 15:return t.next=17,se.checkemail(c.email);case 17:200===t.sent&&l({type:"alert",alertMessage:"L'email ".concat(c.email," ja existeix, escull un altre")});case 19:m.test(c.email)||l({type:"alert",alertMessage:"El format del email \xe9s incorrecte"}),c.password||l({type:"alert",alertMessage:"Has d'indicar una clau d'acc\xe9s"}),c.password.length<8&&l({type:"alert",alertMessage:"La clau d'acc\xe9s ha de tenir un minim de 8 car\xe0cters"}),c.showAlert||(l({type:"loading"}),se.signup(c.username,c.name,c.email,c.password).then((function(t){e.dispatch({type:"login",user:t}),d.push("/")})).catch((function(e){return l({type:"alert",alertMessage:e.response.data.message})})),l({type:"notLoading"}));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=c.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement("h4",null,"Nou usuari a Nem De Festa !!"),r.a.createElement(N.a,{onSubmit:p,className:"w-100"},r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"name-text"},"Nom")),r.a.createElement(le.a,{id:"name",name:"name",type:"text",value:c.name,onChange:f,placeholder:"Nom i Cognoms","aria-label":"Nom i Cognoms","aria-describedby":"name-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"name-email"},"@")),r.a.createElement(le.a,{id:"email",name:"email",type:"text",value:c.email,onChange:f,placeholder:"Correu electr\xf2nic","aria-label":"Correu electr\xf2nic","aria-describedby":"name-email"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"username-text"},"Usuari")),r.a.createElement(le.a,{id:"username",name:"username",type:"text",value:c.username,onChange:f,placeholder:"Usuari","aria-label":"Usuari","aria-describedby":"username-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"password-text"},"Clau")),r.a.createElement(le.a,{type:"password",id:"password",name:"password",value:c.password,onChange:f,placeholder:"Clau d'acc\xe9s","aria-label":"Clau d'acc\xe9s","aria-describedby":"password-text"})),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:c.isLoading},c.isLoading?"Registrant ...":"Registrar"),r.a.createElement(Ne.a,{className:"mt-2",variant:"danger",show:c.showAlert,onClose:function(){return l({type:"closeAlert"})},dismissible:!0},r.a.createElement(Ne.a.Heading,null,"Ups!"),r.a.createElement("ul",null,g))),r.a.createElement("hr",null),r.a.createElement("p",null,"Ja tens un compte?",r.a.createElement(i.b,{to:"/login"}," Entra!!!")))},He=function(e,t){switch(t.type){case"field":return Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(w.a)(Object(w.a)({},e),{},{showAlert:!0,alertMessages:a});case"resetAlert":case"closeAlert":return Object(w.a)(Object(w.a)({},e),{},{showAlert:!1,alertMessages:[]});case"loading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});default:return e}},Se=RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i);var _e=function(e){var t={image:e.user.image,username:e.user.username,name:e.user.name,email:e.user.email,isLoading:!1,showAlert:!1,alertMessages:[],activities:[],comments:[],images:[]},a=Object(n.useReducer)(He,t),c=Object(s.a)(a,2),l=c[0],i=c[1],m=Object(u.g)(),d=function(){var t=Object(z.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,ie.activities(e.user._id);case 3:return t.t1=t.sent,t.t2={type:"field",fieldName:"activities",fieldValue:t.t1},(0,t.t0)(t.t2),t.t3=i,t.next=9,ie.comments(e.user._id);case 9:return t.t4=t.sent,t.t5={type:"field",fieldName:"comments",fieldValue:t.t4},(0,t.t3)(t.t5),t.t6=i,t.next=15,ie.images(e.user._id);case 15:t.t7=t.sent,t.t8={type:"field",fieldName:"images",fieldValue:t.t7},(0,t.t6)(t.t8);case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){d()}),[]);var f=function(){d()},p=function(e){var t=e.target,a=t.name,n=t.value;i({type:"field",fieldName:a,fieldValue:n})},g=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),i({type:"resetAlert"}),l.name||i({type:"alert",alertMessage:"Has d'indicar un nom"}),l.username){t.next=7;break}i({type:"alert",alertMessage:"Has d'indicar un usuari"}),t.next=11;break;case 7:return t.next=9,ie.checkusername(e.user._id,l.username);case 9:200===t.sent&&i({type:"alert",alertMessage:"L'usuari ".concat(l.username," ja existeix, escull un altre")});case 11:if(l.email){t.next=15;break}i({type:"alert",alertMessage:"Has d'indicar un email"}),t.next=19;break;case 15:return t.next=17,ie.checkemail(e.user._id,l.email);case 17:200===t.sent&&i({type:"alert",alertMessage:"L'email ".concat(l.email," ja existeix, escull un altre")});case 19:Se.test(l.email)||i({type:"alert",alertMessage:"El format del email \xe9s incorrecte"}),l.showAlert||(i({type:"loading"}),ie.save(l.username,l.name,l.email).then((function(t){e.callback({type:"login",user:t})})).catch((function(e){return i({type:"alert",alertMessage:e.response.data.message})})),i({type:"notLoading"}));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se.logout();case 2:e.callback({type:"logout"}),m.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=l.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)})),b=l.activities.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,activity:t,onClick:f}))})),y=l.comments.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ye,{user:e.user,comment:t,onClick:f}))})),x=l.images.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(Ee,{user:e.user,image:t,onClick:f}))}));return r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement("h4",null,"El teu perfil"),r.a.createElement("hr",null),r.a.createElement(ue,{onUpload:function(t){i({type:"field",fieldName:"image",fieldValue:t.image}),e.callback({type:"login",user:t})},image:l.image}),r.a.createElement("hr",null),r.a.createElement(N.a,{onSubmit:g,className:"w-100"},r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"username-text"},"Usuari")),r.a.createElement(le.a,{id:"username",name:"username",type:"text",value:l.username,onChange:p,placeholder:"Usuari","aria-label":"Usuari","aria-describedby":"username-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"name-text"},"Nom")),r.a.createElement(le.a,{id:"name",name:"name",type:"text",value:l.name,onChange:p,placeholder:"Nom i Cognoms","aria-label":"Nom i Cognoms","aria-describedby":"name-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"name-email"},"@")),r.a.createElement(le.a,{id:"email",name:"email",type:"text",value:l.email,onChange:p,placeholder:"Correu electr\xf2nic","aria-label":"Correu electr\xf2nic","aria-describedby":"name-email"})),r.a.createElement(ce.a,{className:"mt-2 w-100"},r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"0"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha realitzat ",l.comments.length," comentaris",r.a.createElement(ne.b,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"0"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},y)))),r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Ha publicat ",l.images.length," imatges",r.a.createElement(h.d,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"1"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},x)))),r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},"Assitir\xe0 a ",l.activities.length," activitats",r.a.createElement(he.a,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"2"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},b))))),r.a.createElement("hr",null),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:l.isLoading},l.isLoading?"Salvant ...":"Salvar"),r.a.createElement(D.a,{className:"btn btn-danger w-100 mt-2",onClick:E,disabled:l.isLoading},"Tanca sessi\xf3"),r.a.createElement(Ne.a,{className:"mt-2",variant:"danger",show:l.showAlert,onClose:function(){return i({type:"closeAlert"})},dismissible:!0},r.a.createElement(Ne.a.Heading,null,"Ups!"),r.a.createElement("ul",null,v))),r.a.createElement(ae.a,{show:l.isLoading,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(ae.a.Header,null,r.a.createElement(ae.a.Title,null,"Guardant la Informaci\xf3")),r.a.createElement(ae.a.Body,null,r.a.createElement(o.a,{fluid:!0,className:"d-flex flex-column align-items-center"},r.a.createElement(j.a,{animation:"border",variant:"success",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Grabant..."))))))};var Fe=function(e){var t=function(){e.onClick()},a=e.activities.map((function(a){return r.a.createElement(te.a.Item,{key:a._id,className:"pl-0 pr-0"},r.a.createElement(ge,{user:e.user,activity:a,onClick:t,showImage:!1}))}));return r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"0"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},e.activities.length," Activitats",r.a.createElement(he.a,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"0"},r.a.createElement(B.a.Body,null,r.a.createElement(te.a,{variant:"flush"},a))))};var Ye=function(e){var t=e.locations,a={lat:e.centerLat,lng:e.centerLng};return r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"1"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},e.title,r.a.createElement(h.a,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"1"},r.a.createElement(B.a.Body,null,r.a.createElement(fe,{center:a,points:t,zoom:14}))))},Be=function(e,t){switch(t.type){case"field":return Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(w.a)(Object(w.a)({},e),{},{showAlert:!0,alertMessages:a});case"resetAlert":case"closeAlert":return Object(w.a)(Object(w.a)({},e),{},{showAlert:!1,alertMessages:[]});case"loading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});default:return e}};var Ie=function(e){var t={title:"",description:"",user:e.user._id,showAlert:!1,alertMessages:[],isLoading:!1},a=Object(n.useReducer)(Be,t),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){var t=e.target,a=t.name,n=t.value;i({type:"field",fieldName:a,fieldValue:n})},u=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),i({type:"resetAlert"}),l.title||i({type:"alert",alertMessage:"Has d'indicar un t\xedtol"}),l.description||i({type:"alert",alertMessage:"Has d'introduir un comentari"}),l.showAlert||(i({type:"loading"}),$.create(l.title,l.description,e.event,e.activity).then((function(t){e.onClick()})).catch((function(e){return i({type:"alert",alertMessage:e.response.data.message})})),i({type:"notLoading"}),e.onClick());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=l.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement(N.a,{onSubmit:u,className:"w-100"},r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"title-text"},"T\xedtol")),r.a.createElement(le.a,{id:"title",name:"title",type:"text",value:l.title,onChange:o,placeholder:"T\xedtol","aria-label":"T\xedtol","aria-describedby":"title-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"description-text"},"Comentari")),r.a.createElement(le.a,{id:"description",name:"description",type:"textarea",value:l.description,onChange:o,placeholder:"Comentari","aria-label":"Comentari","aria-describedby":"description-text"})),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:l.isLoading},l.isLoading?"Publicant ...":"Publicar"),r.a.createElement(Ne.a,{className:"mt-2",variant:"danger",show:l.showAlert,onClose:function(){return i({type:"closeAlert"})},dismissible:!0},r.a.createElement(Ne.a.Heading,null,"Ups!"),r.a.createElement("ul",null,m)))};var Ke=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){e.onClick()},o=function(){l(!c)},u=e.comments.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(ye,{user:e.user,comment:t,onClick:i}))})),m=e.user?r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-item-center"},r.a.createElement("span",null,"Deixa el teu comentari!!!")," ",r.a.createElement(D.a,{className:"btn btn-success text-white",onClick:function(){l(!0)}},r.a.createElement(ne.a,{size:"20px"}),r.a.createElement("small",null,"Afegeix"))):r.a.createElement(r.a.Fragment,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:"2"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},e.comments.length," Comentaris",r.a.createElement(ne.b,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:"2"},r.a.createElement(B.a.Body,null,m,r.a.createElement(te.a,{variant:"flush"},u)))),r.a.createElement(ae.a,{show:c,onHide:o},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,"Nou comentari")),r.a.createElement(ae.a.Body,null,r.a.createElement(Ie,{user:e.user,event:e.event,activity:e.activity,onClick:function(){o(),i()}}))))},ze=function(e,t){switch(t.type){case"field":return Object(w.a)(Object(w.a)({},e),{},Object(x.a)({},t.fieldName,t.fieldValue));case"alert":var a=e.alertMessages;return a.push(t.alertMessage),Object(w.a)(Object(w.a)({},e),{},{showAlert:!0,alertMessages:a});case"resetAlert":case"closeAlert":return Object(w.a)(Object(w.a)({},e),{},{showAlert:!1,alertMessages:[]});case"loading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"notLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1});default:return e}};var Pe=function(e){var t={title:"",description:"",event:e.event,activity:e.activity,image:"",showAlert:!1,alertMessages:[],isLoading:!1},a=Object(n.useReducer)(ze,t),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){var t=e.target,a=t.name,n=t.value;i({type:"field",fieldName:a,fieldValue:n})},u=function(){var t=Object(z.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),i({type:"resetAlert"}),l.title||i({type:"alert",alertMessage:"Has d'indicar un t\xedtol"}),l.description||i({type:"alert",alertMessage:"Has d'introduir un comentari"}),l.showAlert||(i({type:"loading"}),G.create(l.title,l.description,l.event,l.activity,l.image).then((function(t){e.onClick()})).catch((function(e){return i({type:"alert",alertMessage:e.response.data.message})})),i({type:"notLoading"}),e.onClick());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=l.alertMessages.map((function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement(N.a,{onSubmit:u,className:"w-100"},r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"title-text"},"T\xedtol")),r.a.createElement(le.a,{id:"title",name:"title",type:"text",value:l.title,onChange:o,placeholder:"T\xedtol","aria-label":"T\xedtol","aria-describedby":"title-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"description-text"},"Descripci\xf3")),r.a.createElement(le.a,{id:"description",name:"description",type:"textarea",value:l.description,onChange:o,placeholder:"Descripci\xf3","aria-label":"Descripci\xf3","aria-describedby":"description-text"})),r.a.createElement(M.a,{className:"mb-3"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"image-text"},"Fitxer")),r.a.createElement(le.a,{id:"image",name:"image",type:"file",onChange:function(e){var t=e.target.files[0];i({type:"field",fieldName:"image",fieldValue:t})},placeholder:"Fitxer","aria-label":"Fitxer","aria-describedby":"image-text"})),r.a.createElement(D.a,{type:"submit",className:"btn btn-success w-100",disabled:l.isLoading},l.isLoading?"Publicant ...":"Publicar"),r.a.createElement(Ne.a,{className:"mt-2",variant:"danger",show:l.showAlert,onClose:function(){return i({type:"closeAlert"})},dismissible:!0},r.a.createElement(Ne.a.Heading,null,"Ups!"),r.a.createElement("ul",null,m)))};var Re=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){e.onClick()},o=function(){l(!c)},u=e.images.map((function(t){return r.a.createElement(te.a.Item,{key:t._id,className:"pl-0 pr-0"},r.a.createElement(Ee,{user:e.user,image:t,onClick:i}))})),m=e.user?r.a.createElement("div",{className:"d-flex flex-row justify-content-around align-item-center"},r.a.createElement("span",null,"Puja la teva imatge !!!")," ",r.a.createElement(D.a,{className:"btn btn-success text-white",onClick:function(){l(!0)}},r.a.createElement(ne.c,{size:"20px"}),r.a.createElement("small",null,"Publica"))):r.a.createElement(r.a.Fragment,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(ce.a.Toggle,{as:B.a.Header,eventKey:e.eventKey},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},e.images.length," Imatges",r.a.createElement(ne.d,{size:"20px"}))),r.a.createElement(ce.a.Collapse,{eventKey:e.eventKey},r.a.createElement(B.a.Body,null,m,r.a.createElement(te.a,{variant:"flush"},u)))),r.a.createElement(ae.a,{show:c,onHide:o},r.a.createElement(ae.a.Header,{closeButton:!0},r.a.createElement(ae.a.Title,null,"Nou comentari")),r.a.createElement(ae.a.Body,null,r.a.createElement(Pe,{user:e.user,event:e.event,activity:e.activity,onClick:function(){o(),i()}}))))},Ue={location:{gpsLocation:{coordinates:[0,0]}},locations:[],activities:[],images:[],likes:[],unlikes:[],comments:[],attendees:[]};var Ve=function(e){var t=Object(u.i)().id,a=Object(n.useState)(Ue),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){Y.get(e).then((function(e){return i(e)}))};Object(n.useEffect)((function(){o(t)}),[]);var m=function(){o(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{user:e.user,event:l,showImage:!1,onClick:m}),r.a.createElement(ce.a,{defaultActiveKey:"0",className:"mt-2"},r.a.createElement(Fe,{activities:l.activities,user:e.user,event:l._id,eventKey:0,onClick:m}),r.a.createElement(Ye,{title:"Localitzacions",locations:l.locations,user:e.user,event:l._id,eventKey:1,centerLat:l.location.gpsLocation.coordinates[0],centerLng:l.location.gpsLocation.coordinates[1],onClick:m}),r.a.createElement(Ke,{comments:l.comments,user:e.user,event:l._id,eventKey:2,onClick:m}),r.a.createElement(Re,{images:l.images,user:e.user,event:l._id,eventKey:3,onClick:m})))};a(37);var Je=function(e){var t=e.event;return r.a.createElement(B.a,{className:"bg-success text-white mb",border:"success"},r.a.createElement(i.b,{to:"/events/"+t._id,className:"text-white"},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,t.name),r.a.createElement(B.a.Text,null,"Desde: ",T()(t.fromDate).format("DD-MM-YYYY"),r.a.createElement("br",null),"Fins: ",T()(t.toDate).format("DD-MM-YYYY")))))};var qe=function(e){var t=Object(n.useState)({lat:0,lng:0}),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(me.d)({googleMapsApiKey:"AIzaSyDf8lFaNmy0tTkfhhBgiJHR4N_yO_8Sfps",googleMapsClientId:"976708241453-g2inohg46v3tjfa2vlhmces4v53mhb4k.apps.googleusercontent.com",language:"es"}),o=i.isLoaded,u=i.loadError,m=JSON.parse(localStorage.getItem("events"))||[];Object(n.useEffect)((function(){m.length>0&&l({lat:m[0].location.gpsLocation.coordinates[0],lng:m[0].location.gpsLocation.coordinates[1]})}),[]);var d=m.map((function(t){return r.a.createElement(me.b,{key:t._id,position:{lat:t.location.gpsLocation.coordinates[0],lng:t.location.gpsLocation.coordinates[1]}},r.a.createElement(Je,{event:t,user:e.user}))}));return o?u?r.a.createElement("div",null,"El mapa no es pot carregar ara."):r.a.createElement(me.a,{mapContainerStyle:{minWidth:"100%",width:"100%",minHeight:"100%",height:"100%",overflow:"auto"},center:c,zoom:10},d):r.a.createElement(j.a,{variant:"success"})};a(125);a(37);var We={location:{gpsLocation:{coordinates:[0,0]}},images:[],likes:[],unlikes:[],comments:[],attendees:[]};var $e=function(e){var t=Object(u.i)().id,a=Object(n.useState)(We),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){W.get(e).then((function(e){return i(e)}))};Object(n.useEffect)((function(){o(t)}),[]);var m=function(){o(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{user:e.user,activity:l,onClick:m,showImage:!1,showLocation:!1}),r.a.createElement(ce.a,{defaultActiveKey:"1",className:"mt-2"},r.a.createElement(Ye,{title:"On es celebra?",locations:[l.location],user:e.user,activity:l._id,eventKey:1,centerLat:l.location.gpsLocation.coordinates[0],centerLng:l.location.gpsLocation.coordinates[1],onClick:m}),r.a.createElement(Ke,{comments:l.comments,user:e.user,activity:l._id,eventKey:2,onClick:m}),r.a.createElement(Re,{images:l.images,user:e.user,activity:l._id,eventKey:3,onClick:m})))};a(126).config();var Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"login":var a=t.user;return localStorage.setItem("user",JSON.stringify(a)),{user:a};case"logout":return localStorage.removeItem("user"),{user:null};default:return e}},Qe={user:JSON.parse(localStorage.getItem("user")||null)};var Xe=function(){var e=Object(n.useReducer)(Ge,Qe),t=Object(s.a)(e,2),a=t[0],c=t[1],l=a.user;return Object(n.useEffect)((function(){se.loggedin().then((function(e){e?l||se.logout().then((function(){return c({type:"logout"})})):c({type:"logout"})})).catch((function(e){return c({type:"logout"})}))}),[]),r.a.createElement(o.a,{className:"fill-window overflow-auto pb-5"},r.a.createElement(p,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(Oe,{user:l})),r.a.createElement(u.b,{exact:!0,path:"/map"},r.a.createElement(qe,{user:l})),r.a.createElement(u.b,{path:"/login"},r.a.createElement(De,{dispatch:c})),r.a.createElement(u.b,{path:"/signup"},r.a.createElement(Te,{dispatch:c})),r.a.createElement(u.b,{path:"/profile/:id",component:ve}),r.a.createElement(u.b,{exact:!0,path:"/events"},r.a.createElement(Oe,{user:l})),r.a.createElement(u.b,{path:"/events/:id"},r.a.createElement(Ve,{user:l})),r.a.createElement(u.b,{path:"/activities/:id"},r.a.createElement($e,{user:l})),r.a.createElement(y,{user:l,callback:c,exact:!0,path:"/profile",component:_e})),r.a.createElement(v,{user:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(Xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t,a){e.exports=a(129)}},[[96,1,2]]]);
//# sourceMappingURL=main.8aec75b5.chunk.js.map